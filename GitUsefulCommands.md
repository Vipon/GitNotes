# Git useful commands
## Работа с branch
### Удаление branch
```
git branch -d BRANCH_NAME
```
### Переименование branch
```
git branch -m OLD_NAME NEW_NAME
```

## Объединение нескольких коммитов
!!! перед любыми подобными действиями лучше делать BACKUP

Для объединения нескольких коммитов достаточно выполнить следующую последовательность команд:
```
git reset HEAD^
git add (files)
git commit --amend
```
Если после интересующих нас коммитов были совершены новые, то перед выполнением необходимо просто сделать новый бранч, перейти к интересующему нас коммиту и выполнить последовательность, после чего подтянуть более новые изменения.

## Diff
### Diff между текущим состоянием и последним комитом.
```
git diff
```
### Diff между коммитами.
```
git diff old_commit new_commit
```

## Patch
### Применение патчей
Для применения патча достаточно выполнить следующую команду, где -v - сделает подробный вывод, file.diff - файл, содержащий патч, который к примеру мог быть сгенерирован __git diff__ или unix утилитой __diff__. Патч либо будет полностью применён, либо ничего не будет изменено.
```
git apply -v file.diff
```
### Модификация патчей
С помощью __git format-patch__ подготавливаем набор всех коммитов для текущей ветки, на которые она отличается от базовой. С помощью __sed__ модифицируем патчи. __Git am__ применяет патчи вместе с коммитами.
```
git format-patch [BASE_BRANCH_NAME] -o [OUTPUT_DIRECTORY]
find . -name "*.patch" -exec sed -i '' -e 's/OLD_TEMPLATE/NEW_TEMPLATE/g' {} \;
git reset --hard [BASE_BRANCH_NAME]
git am *.patch
```

## Удалённый репозиторий
### Список удалённых репозиториев
```
git remote
```
### Добавление нового репозитория в список
```
git remote add [NAME_REMOTE] [URL]
```
### Удаление branch на удалённом репозитории
```
git push [NAME_REMOTE_REPO] --delete [NAME_BANCH_ON_REMOTE_REPO]
```

## Pull request
Сначала добавляем репозиторий в список remote репозиториев:
```
git remote add [name] [URL]
```
После чего отправляем запрос
```
git push [name] [branch]
```

## Разрешение конфликтов
### Переименование файла
Для устранения конфликта с переименованным файлом необходимо исправить связанные с ним файлы, удалить старый, добавить новый и модифицированные.
```
git rm old_name
git add new_name
git add mod_files
git rebase --continue
```